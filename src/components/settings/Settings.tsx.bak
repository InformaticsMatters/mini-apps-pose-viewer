import { Button, CircularProgress, TextField } from '@material-ui/core';
import { createStyles, makeStyles, Theme } from '@material-ui/core/styles';
import React from 'react';

import { useMolecules } from '../../modules/molecules/molecules';
import { useProtein } from '../../modules/protein/protein';
import { setSettings } from '../../modules/settings/settings';

const useStyles = makeStyles((theme: Theme) =>
  createStyles({
    searchIndicator: {
      position: 'absolute',
    },
    searchField: { width: '100%' },
  }),
);

const Settings = () => {
  const { isMoleculesLoading } = useMolecules();
  const { isProteinLoading } = useProtein();

<<<<<<< Updated upstream
=======
  console.log(isMoleculesLoading);
  console.log(isProteinLoading);


>>>>>>> Stashed changes
  const classes = useStyles();
  return (
    <form
      onSubmit={(e) => {
        e.preventDefault();

        // ts doesn't know about the input elements so we need to make an assertion
        // See: https://github.com/typescript-cheatsheets/react-typescript-cheatsheet#forms-and-events

        const target = e.target as typeof e.target & {
          moleculespath: { value: string };
          proteinpath: {value: string}
        };

        setSettings({proteinPath: target.proteinpath.value, moleculesPath: target.moleculespath.value})
      }}
    >
<<<<<<< Updated upstream
      <TextField className={classes.searchField} label="Molecules" name="moleculespath" />
=======
      <TextField label="Molecules" name="moleculespath" />
      <TextField label="Protein" name="proteinpath" />
>>>>>>> Stashed changes
      <Button type="submit" variant="contained" color="primary">
        Load
        {(isMoleculesLoading || isProteinLoading) && <CircularProgress size={24} className={classes.searchIndicator} />}
      </Button>
    </form>
  );
};
export default Settings;
